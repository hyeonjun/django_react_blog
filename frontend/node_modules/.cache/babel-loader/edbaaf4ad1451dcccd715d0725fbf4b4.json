{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\django-react\\\\frontend\\\\src\\\\views\\\\Boardwrite.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router';\nimport CKEditor from 'ckeditor4-react';\nimport { Form } from \"react-bootstrap\";\nimport '../views/Boardwrite.css';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport jQuery from \"jquery\";\nwindow.$ = window.jQuery = jQuery;\nconst titleStyle = {\n  marginBottom: 9,\n  width: 660\n};\n\nfunction Boardwrite() {\n  _s();\n\n  let [filterList] = useState([{\n    id: 1,\n    infomation: '챌린저'\n  }, {\n    id: 2,\n    infomation: '그랜드마스터'\n  }, {\n    id: 3,\n    infomation: '마스터'\n  }, {\n    id: 4,\n    infomation: '다이아몬드'\n  }, {\n    id: 5,\n    infomation: '플레티넘'\n  }, {\n    id: 6,\n    infomation: '골드'\n  }, {\n    id: 7,\n    infomation: '실버'\n  }, {\n    id: 8,\n    infomation: '브론즈'\n  }, {\n    id: 9,\n    infomation: '아이언'\n  }]);\n  let [InfomationfilterList, setInfomationFilterList] = useState(\"\");\n  let Today = new Date();\n  let date = Today.getFullYear() + \"-\" + Today.getMonth() + \"-\" + Today.getDate();\n\n  function getCookie(name) {\n    var cookieValue = null;\n\n    if (document.cookie && document.cookie !== '') {\n      var cookies = document.cookie.split(';');\n\n      for (var i = 0; i < cookies.length; i++) {\n        var cookie = jQuery.trim(cookies[i]);\n\n        if (cookie.substring(0, name.length + 1) === name + '=') {\n          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n          break;\n        }\n      }\n    }\n\n    return cookieValue;\n  }\n\n  const csrftoken = getCookie('csrfToken');\n  const history = useHistory();\n  let [title, setTitle] = useState(\"\");\n  let [content, setContent] = useState(\"내용을 입력하세요.\");\n  let [userPhoto, setUserPhoto] = useState();\n  let [user_id, setUser_id] = useState();\n  let [userNickname, setUserNickname] = useState();\n  let [usergrade, setUserGrade] = useState();\n  let sendData;\n  let [urls, setUrls] = useState();\n\n  const handleEffect = handleSubmit => {\n    if (InfomationfilterList === \"\" || InfomationfilterList.length === 0) {\n      alert(\"한 개 이상의 언어를 선택해주세요.\");\n      return;\n    }\n\n    sendData = {\n      title: title,\n      content: content,\n      date: date,\n      like: 0,\n      nickname: userNickname,\n      infomation: InfomationfilterList,\n      profileImage: userPhoto,\n      user_id: user_id,\n      grade: usergrade\n    };\n    handleSubmit();\n  };\n\n  useEffect(() => {\n    fetch('http://39.118.174.168:8000/api/current_user/', {\n      headers: {\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      }\n    }).then(res => res.json()).then(json => {\n      if (json.id === null || json.id === undefined) {\n        alert(\"로그인이 필요합니다.\");\n        window.location.href = \"/login\";\n      }\n\n      fetch('http://39.118.174.168:8000/api/profile/' + json.id + '/update/', {\n        method: 'PATCH',\n        headers: {\n          Authorization: `JWT ${localStorage.getItem('token')}`\n        }\n      }).then(res => res.json()).then(userData => {\n        setUserPhoto(userData.photo);\n        setUser_id(userData.user_id);\n        setUserNickname(userData.nickname);\n        setUserGrade(userData.grade);\n\n        if (userData.grade === 4) {\n          setUserGrade(\"일반 수강생\");\n          setUrls(\"student/\");\n        } else if (userData.grade === 3) {\n          setUserGrade(\"프리미엄 수강생\");\n          setUrls(\"premiumst/\");\n        } else if (userData.grade === 2) {\n          setUserGrade(\"일반 파트너\");\n          setUrls(\"partner/\");\n        } else if (userData.grade === 1) {\n          setUserGrade(\"프리미엄 파트너\");\n          setUrls(\"premium/\");\n        } else {\n          history.push('/profile');\n          alert(\"티어인증이 필요합니다\");\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [history]);\n\n  const handleSubmit = () => {\n    let form_data = new FormData();\n    form_data.append('category', sendData.grade);\n    form_data.append('title', sendData.title);\n    form_data.append('contents', sendData.content);\n    form_data.append('pub_date', sendData.date);\n    form_data.append('infomation', sendData.infomation);\n    form_data.append('like', sendData.like);\n    form_data.append('nickname', sendData.nickname);\n    form_data.append('profileImage', sendData.profileImage);\n    form_data.append('user_id', sendData.user_id);\n    fetch(\"http://39.118.174.168:8000/board/\" + urls, {\n      method: 'POST',\n      headers: {\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      },\n      body: form_data\n    }).then(res => res.json()).catch(error => console.error('Error:', error)).then(response => console.log('Success:', JSON.stringify(response))).then(history.push(\"/\" + urls)); // .then(history.go(0));\n  };\n\n  const ClickFilter = lang => {\n    let Num = 0;\n    let List = [...InfomationfilterList];\n    List.map(a => {\n      if (a === lang) {\n        Num = 1;\n      }\n\n      return Num;\n    });\n\n    if (Num === 0) {\n      List.push(lang);\n    } else {\n      List.splice(List.indexOf(lang), 1);\n    }\n\n    setInfomationFilterList(List);\n  };\n\n  const handleChange = event => {\n    console.log(event.editor.getData());\n    setContent(event.editor.getData()); // setContent(event.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uAE00\\uC791\\uC131\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(FormControl, {\n          className: \"MenuItem\",\n          children: /*#__PURE__*/_jsxDEV(MenuItem, {\n            children: [\"\\uAC8C\\uC2DC\\uD310 = \", usergrade]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          style: titleStyle,\n          placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n          onChange: e => {\n            setTitle(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: /*#__PURE__*/_jsxDEV(CKEditor, {\n          value: content,\n          onChange: handleChange,\n          config: {\n            extraPlugins: 'print,format,font,colorbutton,justify,image2',\n            // filebrowserUploadMethod:'form',\n            uiColor: \"#AADC6E\",\n            // filebrowserBrowseUrl: 'http://39.118.174.168:8000/media/board/',\n            // filebrowserImageBrowseUrl: 'http://39.118.174.168:8000/ckeditor/browse/',\n            filebrowserUploadUrl: 'http://39.118.174.168:8000/media/board/',\n            filebrowserImageUploadUrl: 'http://39.118.174.168:8000/ckeditor/upload/',\n            // ckfinder: {\n            //   // Upload the images to the server using the CKFinder QuickUpload command.\n            //   uploadUrl: 'http://39.118.174.168:8000/ckeditor/upload/'\n            // },\n            headers: {\n              'X-CSRFToken': csrftoken\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"upButton\",\n        onClick: () => {\n          handleEffect(handleSubmit);\n        },\n        children: \"\\uCD9C\\uAC04\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"pDRpRs\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"eyrfCGs\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter__heads\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            listStyleType: \"none\"\n          },\n          children: filterList.map(a => {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: a.infomation,\n                className: \"filters-input__checkboxs\",\n                value: \"action\",\n                type: \"checkbox\",\n                \"data-type\": \"genres\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"input__labels\",\n                htmlFor: a.infomation,\n                onClick: () => {\n                  ClickFilter(a.infomation);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\" \", a.infomation, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"filters-input__ticks\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"13\",\n                    height: \"13\",\n                    children: /*#__PURE__*/_jsxDEV(\"use\", {\n                      xlinkHref: \"#check\",\n                      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                        viewBox: \"0 0 24 24\",\n                        id: \"check\",\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        children: /*#__PURE__*/_jsxDEV(\"path\", {\n                          d: \"M9 21.035l-9-8.638 2.791-2.87 6.156 5.874 12.21-12.436L24 5.782z\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 238,\n                          columnNumber: 104\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 238,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 237,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 32\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 29\n              }, this)]\n            }, a.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 25\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Boardwrite, \"k1dg7JTvbkP8YRAO9p9JRFJaqKQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = Boardwrite;\nexport default Boardwrite;\n\nvar _c;\n\n$RefreshReg$(_c, \"Boardwrite\");","map":{"version":3,"sources":["C:/django-react/frontend/src/views/Boardwrite.js"],"names":["React","useState","useEffect","useHistory","CKEditor","Form","MenuItem","FormControl","jQuery","window","$","titleStyle","marginBottom","width","Boardwrite","filterList","id","infomation","InfomationfilterList","setInfomationFilterList","Today","Date","date","getFullYear","getMonth","getDate","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","csrftoken","history","title","setTitle","content","setContent","userPhoto","setUserPhoto","user_id","setUser_id","userNickname","setUserNickname","usergrade","setUserGrade","sendData","urls","setUrls","handleEffect","handleSubmit","alert","like","nickname","profileImage","grade","fetch","headers","Authorization","localStorage","getItem","then","res","json","undefined","location","href","method","userData","photo","push","catch","error","console","log","form_data","FormData","append","body","response","JSON","stringify","ClickFilter","lang","Num","List","map","a","splice","indexOf","handleChange","event","editor","getData","e","target","value","extraPlugins","uiColor","filebrowserUploadUrl","filebrowserImageUploadUrl","listStyleType"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from 'react';\r\nimport { useHistory } from 'react-router'\r\nimport CKEditor from 'ckeditor4-react';\r\nimport {Form} from \"react-bootstrap\";\r\nimport '../views/Boardwrite.css';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport jQuery from \"jquery\";\r\nwindow.$ = window.jQuery = jQuery;\r\n\r\n  const titleStyle = {\r\n     marginBottom: 9,\r\n     width: 660\r\n\r\n   };\r\n\r\n   \r\nfunction Boardwrite() {\r\n\r\n\r\n  let [filterList] = useState([{id : 1, infomation: '챌린저'}, {id : 2, infomation : '그랜드마스터'},\r\n    {id : 3, infomation : '마스터'}, {id : 4, infomation :'다이아몬드'}, {id : 5, infomation:'플레티넘'},\r\n    {id : 6, infomation:'골드'}, {id : 7, infomation:'실버'}, {id : 8, infomation:'브론즈'}, {id : 9, infomation:'아이언'}])\r\n    let [InfomationfilterList, setInfomationFilterList] = useState(\"\")\r\n    \r\n    let Today = new Date();\r\n    let date = Today.getFullYear() + \"-\" + Today.getMonth() + \"-\" + Today.getDate()\r\n    \r\n    function getCookie(name) {\r\n      var cookieValue = null;\r\n      if (document.cookie && document.cookie !== '') {\r\n          var cookies = document.cookie.split(';');\r\n          for (var i = 0; i < cookies.length; i++) {\r\n              var cookie = jQuery.trim(cookies[i]);\r\n              if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n                  break;\r\n              }\r\n          }\r\n      }\r\n      return cookieValue;\r\n    }\r\n    const csrftoken = getCookie('csrfToken');\r\n\r\n    const history = useHistory()\r\n    let [title , setTitle] = useState(\"\")\r\n    let [content , setContent] = useState(\"내용을 입력하세요.\")\r\n    let [userPhoto, setUserPhoto] = useState()\r\n    let [user_id, setUser_id] = useState()\r\n    let [userNickname, setUserNickname] = useState()\r\n    let [usergrade, setUserGrade] = useState()\r\n    let sendData;\r\n    let [urls, setUrls] = useState()\r\n    const handleEffect = (handleSubmit) => {\r\n        if(InfomationfilterList === \"\" || InfomationfilterList.length === 0){\r\n            alert(\"한 개 이상의 언어를 선택해주세요.\")\r\n            return;\r\n        }\r\n        sendData = {\r\n            title : title,\r\n            content : content,\r\n            date : date,\r\n            like : 0,\r\n            nickname : userNickname,\r\n            infomation : InfomationfilterList,\r\n            profileImage : userPhoto,\r\n            user_id : user_id,\r\n            grade : usergrade\r\n        }\r\n        handleSubmit()\r\n    }\r\n\r\n    useEffect(()=>{\r\n        fetch('http://39.118.174.168:8000/api/current_user/', {\r\n          headers: {\r\n            Authorization: `JWT ${localStorage.getItem('token')}`\r\n          }\r\n        })\r\n        .then(res => res.json())\r\n        .then(json => {\r\n          if (json.id === null || json.id === undefined) {\r\n            alert(\"로그인이 필요합니다.\")\r\n            window.location.href = \"/login\"\r\n        }fetch('http://39.118.174.168:8000/api/profile/' + json.id + '/update/',{\r\n                method : 'PATCH',\r\n                headers: {\r\n                    Authorization: `JWT ${localStorage.getItem('token')}`\r\n                },\r\n            })\r\n            .then((res)=>res.json())\r\n            .then((userData)=> {\r\n                setUserPhoto(userData.photo);\r\n                setUser_id(userData.user_id);\r\n                setUserNickname(userData.nickname);\r\n                setUserGrade(userData.grade);\r\n                if(userData.grade===4){\r\n                  setUserGrade(\"일반 수강생\");\r\n                  setUrls(\"student/\");\r\n                } else if(userData.grade===3){\r\n                  setUserGrade(\"프리미엄 수강생\");\r\n                  setUrls(\"premiumst/\");\r\n                } else if(userData.grade===2){\r\n                  setUserGrade(\"일반 파트너\");\r\n                  setUrls(\"partner/\");\r\n                } else if(userData.grade===1){\r\n                  setUserGrade(\"프리미엄 파트너\");\r\n                  setUrls(\"premium/\");\r\n                } else{\r\n                  history.push('/profile');\r\n                  alert(\"티어인증이 필요합니다\");\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n              });\r\n        }).catch(error => {\r\n            console.log(error)\r\n          });\r\n    },[history])\r\n\r\n    const handleSubmit = () => {\r\n      let form_data = new FormData();\r\n      form_data.append('category', sendData.grade);\r\n      form_data.append('title', sendData.title);\r\n      form_data.append('contents', sendData.content);\r\n      form_data.append('pub_date', sendData.date);\r\n      form_data.append('infomation', sendData.infomation);\r\n      form_data.append('like', sendData.like);\r\n      form_data.append('nickname', sendData.nickname);\r\n      form_data.append('profileImage', sendData.profileImage)\r\n      form_data.append('user_id', sendData.user_id);\r\n      \r\n      fetch(\"http://39.118.174.168:8000/board/\"+urls, {\r\n          method : 'POST',\r\n          headers: {\r\n              Authorization : `JWT ${localStorage.getItem('token')}`,\r\n          },\r\n          body : form_data\r\n      })\r\n      .then(res => res.json())\r\n      .catch(error => console.error('Error:', error))\r\n      .then(response => console.log('Success:', JSON.stringify(response)))\r\n      .then(history.push(\"/\"+urls))\r\n      // .then(history.go(0));\r\n  };\r\n\r\n    const ClickFilter = (lang)=>{\r\n      let Num = 0;\r\n      let List = [...InfomationfilterList]\r\n      \r\n      List.map((a)=>{\r\n          if(a === lang){\r\n              Num = 1;\r\n          }\r\n          return Num;\r\n      })\r\n      if (Num === 0) {\r\n          List.push(lang)\r\n      }else{\r\n          List.splice(List.indexOf(lang),1)\r\n      }\r\n      setInfomationFilterList(List)\r\n  }\r\n  const handleChange = (event) => {\r\n    console.log(event.editor.getData())\r\n    setContent(event.editor.getData())\r\n    // setContent(event.target.value);\r\n  };\r\n\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n            <div className=\"container-section\">\r\n              <h2>글작성</h2>\r\n              <div>\r\n              <FormControl className=\"MenuItem\"\r\n                           >\r\n              <MenuItem>게시판 = {usergrade}</MenuItem>\r\n              </FormControl>\r\n              <br />\r\n              <Form.Control\r\n                 type = \"text\"\r\n                 style = {titleStyle}\r\n                 placeholder =\"제목을 입력하세요\"\r\n                 onChange = {(e)=>{setTitle(e.target.value)}}/>\r\n              </div>\r\n              <form>\r\n              <CKEditor \r\n                  value = {content}\r\n                  onChange = {handleChange}\r\n                  \r\n                  config={{\r\n                    \r\n                    extraPlugins: 'print,format,font,colorbutton,justify,image2',\r\n                    // filebrowserUploadMethod:'form',\r\n                    uiColor: \"#AADC6E\",\r\n                    // filebrowserBrowseUrl: 'http://39.118.174.168:8000/media/board/',\r\n                    // filebrowserImageBrowseUrl: 'http://39.118.174.168:8000/ckeditor/browse/',\r\n                    filebrowserUploadUrl: 'http://39.118.174.168:8000/media/board/',\r\n                    filebrowserImageUploadUrl: 'http://39.118.174.168:8000/ckeditor/upload/',\r\n                    // ckfinder: {\r\n                    //   // Upload the images to the server using the CKFinder QuickUpload command.\r\n                    //   uploadUrl: 'http://39.118.174.168:8000/ckeditor/upload/'\r\n                    // },\r\n                    headers: {\r\n                      'X-CSRFToken': csrftoken,\r\n                    }\r\n                  }}                  \r\n              />\r\n              </form>\r\n                <button className=\"upButton\"\r\n                  onClick={()=>{\r\n                    handleEffect(handleSubmit) \r\n                  }}>\r\n\r\n                출간하기</button>\r\n            </div>\r\n                        \r\n\r\n          <aside className=\"pDRpRs\">\r\n            <div className=\"eyrfCGs\">\r\n              <div className=\"filter__heads\" />\r\n                <ul style={{ listStyleType: \"none\"}}>\r\n                 {\r\n                    filterList.map((a)=>{\r\n                        return(\r\n                        <li key={a.id}>\r\n                            <input id={a.infomation} className=\"filters-input__checkboxs\" value=\"action\" type=\"checkbox\" data-type=\"genres\"></input>\r\n                            <label className=\"input__labels\" htmlFor={a.infomation} onClick={()=>{ClickFilter(a.infomation)}}>\r\n                              <span> {a.infomation} </span>\r\n                               <span className=\"filters-input__ticks\">\r\n                                <svg \r\n                                width=\"13\"\r\n                                height=\"13\">\r\n                                <use xlinkHref=\"#check\">\r\n                                <svg viewBox=\"0 0 24 24\" id=\"check\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9 21.035l-9-8.638 2.791-2.87 6.156 5.874 12.21-12.436L24 5.782z\"></path></svg>\r\n                                </use>\r\n                                </svg>\r\n                              </span>\r\n                            </label>\r\n                        </li>\r\n                        )\r\n                    })\r\n                  }\r\n                </ul>\r\n                \r\n               </div>  \r\n            </aside>\r\n                    \r\n    </>\r\n  )\r\n}\r\nexport default Boardwrite;"]},"metadata":{},"sourceType":"module"}