{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\django-react\\\\frontend\\\\src\\\\views\\\\Boardwrite.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router';\nimport CKEditor from 'ckeditor4-react';\nimport { Form } from \"react-bootstrap\";\nimport '../views/Boardwrite.css';\nconst titleStyle = {\n  marginBottom: 9\n};\n\nfunction Boardwrite() {\n  _s();\n\n  let [filterList] = useState([{\n    id: 1,\n    language: '챌린져'\n  }, {\n    id: 2,\n    language: '그랜드마스터'\n  }, {\n    id: 3,\n    language: '마스터'\n  }, {\n    id: 4,\n    language: '다이아몬드'\n  }, {\n    id: 5,\n    language: '플레티넘'\n  }, {\n    id: 6,\n    language: '골드'\n  }, {\n    id: 7,\n    language: '실버'\n  }, {\n    id: 8,\n    language: '브론즈'\n  }, {\n    id: 9,\n    language: '아이언'\n  }]);\n  let [languagefilterList, setLanguageFilterList] = useState(\"\");\n  let Today = new Date();\n  let date = Today.getFullYear() + \"-\" + Today.getMonth() + \"-\" + Today.getDate();\n  const history = useHistory();\n  let [goback, setGoback] = useState(false);\n  let [imgGoback, setImgGoback] = useState(false);\n  let [onEditorChange, setonEditorChange] = useState(\"\");\n  let [img, setImg] = useState();\n  let [imgURL, setImgURL] = useState();\n  let [title, setTitle] = useState();\n  let [content, setContent] = useState(\"\");\n  let [userPhoto, setUserPhoto] = useState();\n  let [user_id, setUser_id] = useState();\n  let [userNickname, setUserNickname] = useState();\n  let sendData;\n\n  const handleEffect = handleSubmit => {\n    if (languagefilterList === \"\" || languagefilterList.length === 0) {\n      alert(\"한 개 이상의 언어를 선택해주세요.\");\n      return;\n    }\n\n    sendData = {\n      image: imgURL,\n      title: title,\n      content: content,\n      date: date,\n      like: 0,\n      nickname: userNickname,\n      language: languagefilterList,\n      profileImage: userPhoto,\n      user_id: user_id\n    };\n    handleSubmit();\n  };\n\n  let [ImgCount, setImgCount] = useState(0);\n  const refImgFiles = useRef(null);\n  useEffect(() => {\n    if (img !== undefined) {\n      setImgCount(1);\n    }\n  }, [img]);\n\n  const handleSubmit = () => {\n    let form_data = new FormData();\n    form_data.append('title', sendData.title);\n    form_data.append('content', sendData.content);\n    form_data.append('date', sendData.date);\n    form_data.append('language', sendData.language);\n    form_data.append('like', sendData.like);\n    form_data.append('nickname', sendData.userNickname);\n    form_data.append('profileImage', sendData.profileImage);\n    form_data.append('user_id', sendData.user_id);\n    fetch(\"http://39.118.174.168:8000/board/ckeditor/upload/\", {\n      method: 'POST',\n      headers: {\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      },\n      body: form_data\n    }).then(res => res.json()).catch(error => console.error('Error:', error)).then(response => console.log('Success:', JSON.stringify(response))).then(history.push('/primium')).then(history.go(0));\n  };\n\n  useEffect(() => {\n    fetch('http://39.118.174.168:8000/api/current_user/', {\n      headers: {\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      }\n    }).then(res => res.json()).then(json => {\n      if (json.id === null || json.id === undefined) {\n        alert(\"로그인이 필요합니다.\");\n        history.push('/');\n      }\n\n      fetch('http://39.118.174.168:8000/api/profile/' + json.id + '/update/', {\n        method: 'PATCH',\n        headers: {\n          Authorization: `JWT ${localStorage.getItem('token')}`\n        }\n      }).then(res => res.json()).then(userData => {\n        setUserPhoto(userData.photo);\n        setUser_id(userData.user_id);\n        setUserNickname(userData.userNickname);\n      }).catch(error => {\n        console.log(error);\n      });\n      ;\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [userPhoto]);\n\n  const ClickFilter = lang => {\n    let Num = 0;\n    let List = [...languagefilterList];\n    List.map(a => {\n      if (a === lang) {\n        Num = 1;\n      }\n\n      return Num;\n    });\n\n    if (Num === 0) {\n      List.push(lang);\n    } else {\n      List.splice(List.indexOf(lang), 1);\n    }\n\n    setLanguageFilterList(List);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uAE00\\uC4F0\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"text\",\n        style: titleStyle,\n        placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n        onChange: e => {\n          setTitle;\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(CKEditor, {\n        data: \"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n        onChange: e => {\n          setContent;\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"upButton\",\n        onClick: () => {\n          handleEffect(handleSubmit);\n          setGoback(false);\n        },\n        children: \"\\uCD9C\\uAC04\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"pDRpRs\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"eyrfCGs\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter__heads\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            listStyleType: \"none\"\n          },\n          children: filterList.map(a => {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: a.language,\n                className: \"filters-input__checkboxs\",\n                value: \"action\",\n                type: \"checkbox\",\n                \"data-type\": \"genres\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"input__labels\",\n                htmlFor: a.language,\n                onClick: () => {\n                  ClickFilter(a.language);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: a.language\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"filters-input__ticks\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"13\",\n                    height: \"13\",\n                    children: /*#__PURE__*/_jsxDEV(\"use\", {\n                      xlinkHref: \"#check\",\n                      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                        viewBox: \"0 0 24 24\",\n                        id: \"check\",\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        children: /*#__PURE__*/_jsxDEV(\"path\", {\n                          d: \"M9 21.035l-9-8.638 2.791-2.87 6.156 5.874 12.21-12.436L24 5.782z\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 183,\n                          columnNumber: 108\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 37\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 182,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 29\n              }, this)]\n            }, a.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 25\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Boardwrite, \"1ebLFarLImG9WepAm8JVB3hH94o=\", false, function () {\n  return [useHistory];\n});\n\n_c = Boardwrite;\nexport default Boardwrite;\n\nvar _c;\n\n$RefreshReg$(_c, \"Boardwrite\");","map":{"version":3,"sources":["C:/django-react/frontend/src/views/Boardwrite.js"],"names":["React","useState","useEffect","useRef","useHistory","CKEditor","Form","titleStyle","marginBottom","Boardwrite","filterList","id","language","languagefilterList","setLanguageFilterList","Today","Date","date","getFullYear","getMonth","getDate","history","goback","setGoback","imgGoback","setImgGoback","onEditorChange","setonEditorChange","img","setImg","imgURL","setImgURL","title","setTitle","content","setContent","userPhoto","setUserPhoto","user_id","setUser_id","userNickname","setUserNickname","sendData","handleEffect","handleSubmit","length","alert","image","like","nickname","profileImage","ImgCount","setImgCount","refImgFiles","undefined","form_data","FormData","append","fetch","method","headers","Authorization","localStorage","getItem","body","then","res","json","catch","error","console","response","log","JSON","stringify","push","go","userData","photo","ClickFilter","lang","Num","List","map","a","splice","indexOf","e","listStyleType"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useHistory } from 'react-router'\r\nimport CKEditor from 'ckeditor4-react';\r\nimport {Form} from \"react-bootstrap\";\r\nimport '../views/Boardwrite.css';\r\n\r\n\r\n\r\n\r\n  const titleStyle = {\r\n     marginBottom: 9\r\n   };\r\n\r\n   \r\nfunction Boardwrite() {\r\n\r\n\r\n  let [filterList] = useState([{id : 1, language: '챌린져'}, {id : 2, language : '그랜드마스터'},\r\n    {id : 3, language : '마스터'}, {id : 4, language :'다이아몬드'}, {id : 5, language:'플레티넘'},\r\n    {id : 6, language:'골드'}, {id : 7, language:'실버'}, {id : 8, language:'브론즈'}, {id : 9, language:'아이언'}])\r\n    let [languagefilterList, setLanguageFilterList] = useState(\"\")\r\n    \r\n    let Today = new Date();\r\n    let date = Today.getFullYear() + \"-\" + Today.getMonth() + \"-\" + Today.getDate()\r\n    \r\n\r\n    const history = useHistory()\r\n    let [goback, setGoback] = useState(false)\r\n    let [imgGoback, setImgGoback] = useState(false)\r\n    let [onEditorChange, setonEditorChange] = useState(\"\")\r\n    let [img , setImg] = useState()\r\n    let [imgURL, setImgURL] = useState()\r\n    let [title , setTitle] = useState()\r\n    let [content , setContent] = useState(\"\")\r\n    let [userPhoto, setUserPhoto] = useState()\r\n    let [user_id, setUser_id] = useState()\r\n    let [userNickname, setUserNickname] = useState()\r\n    let sendData;\r\n\r\n    const handleEffect = (handleSubmit) => {\r\n        if(languagefilterList === \"\" || languagefilterList.length === 0){\r\n            alert(\"한 개 이상의 언어를 선택해주세요.\")\r\n            return;\r\n        }\r\n        sendData = {\r\n            image : imgURL,\r\n            title : title,\r\n            content : content,\r\n            date : date,\r\n            like : 0,\r\n            nickname : userNickname,\r\n            language : languagefilterList,\r\n            profileImage : userPhoto,\r\n            user_id : user_id\r\n        }\r\n        handleSubmit()\r\n    }\r\n\r\n    let [ImgCount, setImgCount] = useState(0);\r\n    const refImgFiles = useRef(null);\r\n\r\n    useEffect(()=>{\r\n        if(img !== undefined){\r\n            setImgCount(1)\r\n        }\r\n    },[img])\r\n    \r\n    const handleSubmit = () => {\r\n        let form_data = new FormData();\r\n\r\n        form_data.append('title', sendData.title);\r\n        form_data.append('content', sendData.content);\r\n        form_data.append('date', sendData.date);\r\n        form_data.append('language', sendData.language);\r\n        form_data.append('like', sendData.like);\r\n        form_data.append('nickname', sendData.userNickname);\r\n        form_data.append('profileImage', sendData.profileImage)\r\n        form_data.append('user_id', sendData.user_id);\r\n\r\n        fetch(\"http://39.118.174.168:8000/board/ckeditor/upload/\", {\r\n            method : 'POST',\r\n            headers: {\r\n                Authorization : `JWT ${localStorage.getItem('token')}`,\r\n            },\r\n            body : form_data\r\n        })\r\n        .then(res => res.json())\r\n        .catch(error => console.error('Error:', error))\r\n        .then(response => console.log('Success:', JSON.stringify(response)))\r\n        .then(history.push('/primium'))\r\n        .then(history.go(0));\r\n    };\r\n\r\n    useEffect(()=>{\r\n        fetch('http://39.118.174.168:8000/api/current_user/', {\r\n          headers: {\r\n            Authorization: `JWT ${localStorage.getItem('token')}`\r\n          }\r\n        })\r\n        .then(res => res.json())\r\n        .then(json => {\r\n          if (json.id === null || json.id === undefined) {\r\n            alert(\"로그인이 필요합니다.\")\r\n            history.push('/')\r\n        }fetch('http://39.118.174.168:8000/api/profile/' + json.id + '/update/',{\r\n                method : 'PATCH',\r\n                headers: {\r\n                    Authorization: `JWT ${localStorage.getItem('token')}`\r\n                },\r\n            })\r\n            .then((res)=>res.json())\r\n            .then((userData)=> {\r\n                setUserPhoto(userData.photo)\r\n                setUser_id(userData.user_id)\r\n                setUserNickname(userData.userNickname)\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n              });;\r\n        }).catch(error => {\r\n            console.log(error)\r\n          });\r\n    },[userPhoto])\r\n\r\n    const ClickFilter = (lang)=>{\r\n      let Num = 0;\r\n      let List = [...languagefilterList]\r\n      \r\n      List.map((a)=>{\r\n          if(a === lang){\r\n              Num = 1;\r\n          }\r\n          return Num;\r\n      })\r\n      if (Num === 0) {\r\n          List.push(lang)\r\n      }else{\r\n          List.splice(List.indexOf(lang),1)\r\n      }\r\n      setLanguageFilterList(List)\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n    <div className=\"container-section\">\r\n    <h2>글쓰기</h2>\r\n    <Form.Control\r\n          type=\"text\"\r\n          style={titleStyle}\r\n          placeholder=\"제목을 입력하세요\"\r\n          onChange={(e)=>{setTitle}}\r\n        />\r\n    \r\n    <CKEditor data=\"내용을 입력하세요\"\r\n              onChange={(e)=>{setContent}}\r\n             />\r\n             \r\n             <button className=\"upButton\" onClick={()=>{\r\n                            handleEffect(handleSubmit)\r\n                            setGoback(false)\r\n                        }}>출간하기</button>\r\n                        </div>\r\n                        {\r\n\r\n          <aside className=\"pDRpRs\">\r\n                    <div className=\"eyrfCGs\">\r\n                    <div className=\"filter__heads\" />\r\n              <ul style={{ listStyleType: \"none\"}}>\r\n                    {\r\n                    filterList.map((a)=>{\r\n                        return(\r\n                        <li key={a.id}>\r\n                            <input id={a.language} className=\"filters-input__checkboxs\" value=\"action\" type=\"checkbox\" data-type=\"genres\"></input>\r\n                            <label className=\"input__labels\" htmlFor={a.language} onClick={()=>{ClickFilter(a.language)}}>\r\n                            <span>\r\n                                {a.language}</span>\r\n                            <span className=\"filters-input__ticks\">\r\n                                <svg \r\n                                width=\"13\"\r\n                                height=\"13\">\r\n                                <use xlinkHref=\"#check\">\r\n                                    <svg viewBox=\"0 0 24 24\" id=\"check\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9 21.035l-9-8.638 2.791-2.87 6.156 5.874 12.21-12.436L24 5.782z\"></path></svg>\r\n                                </use>\r\n                                </svg>\r\n                            </span>\r\n                            </label>\r\n                        </li>\r\n                        )\r\n                    })\r\n                    }\r\n                </ul>\r\n                \r\n                    </div>  \r\n            </aside>\r\n                    }\r\n    </>\r\n  )\r\n}\r\nexport default Boardwrite;"]},"metadata":{},"sourceType":"module"}