{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\django-react\\\\frontend\\\\src\\\\views\\\\Update.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useHistory } from 'react-router';\nimport CKEditor from 'ckeditor4-react-advanced';\nimport { Form } from \"react-bootstrap\";\nimport { useLocation } from \"react-router\";\nimport jQuery from \"jquery\";\nwindow.$ = window.jQuery = jQuery;\nconst titleStyle = {\n  marginBottom: 9,\n  width: 762\n};\n\nfunction Update(props) {\n  _s();\n\n  let [filterList] = useState([{\n    id: 1,\n    infomation: '챌린저'\n  }, {\n    id: 2,\n    infomation: '그랜드마스터'\n  }, {\n    id: 3,\n    infomation: '마스터'\n  }, {\n    id: 4,\n    infomation: '다이아몬드'\n  }, {\n    id: 5,\n    infomation: '플레티넘'\n  }, {\n    id: 6,\n    infomation: '골드'\n  }, {\n    id: 7,\n    infomation: '실버'\n  }, {\n    id: 8,\n    infomation: '브론즈'\n  }, {\n    id: 9,\n    infomation: '아이언'\n  }]);\n  let [InfomationfilterList, setInfomationFilterList] = useState(\"\");\n\n  const handleChange = event => {\n    setContent(event.editor.getData()); // setContent(event.target.value);\n  };\n\n  const history = useHistory(); // let Today = new Date();\n  // let date = Today.getFullYear() + \"-\" + Today.getMonth() + \"-\" + Today.getDate()\n\n  let pgN = document.location.href.split('/')[4];\n  let [title, setTitle] = useState(\"\");\n  let [content, setContent] = useState(\"\");\n  let [detailList, setDetailList] = useState({});\n  let [detailUserInfo, setDetailUserInfo] = useState({});\n  let [detailDate, setDetailDate] = useState();\n  let [usergrade, setUserGrade] = useState();\n  let [currnetUser, setCurrentUser] = useState({});\n  let [urls, setUrls] = useState();\n  let Today = new Date();\n  let date = Today.getFullYear() + \"년\" + Today.getMonth() + \"월\" + Today.getDate() + \"일\";\n  const location = useLocation();\n  const csrftoken = getCookie('csrfToken');\n\n  function getCookie(name) {\n    var cookieValue = null;\n\n    if (document.cookie && document.cookie !== '') {\n      var cookies = document.cookie.split(';');\n\n      for (var i = 0; i < cookies.length; i++) {\n        var cookie = jQuery.trim(cookies[i]);\n\n        if (cookie.substring(0, name.length + 1) === name + '=') {\n          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n          break;\n        }\n      }\n    }\n\n    return cookieValue;\n  }\n\n  useEffect(() => {\n    fetch('http://39.118.174.168:8000/api/current_user/', {\n      headers: {\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      }\n    }).then(res => res.json()).then(json => {\n      fetch('http://39.118.174.168:8000/api/profile/' + json.id + '/update/', {\n        method: 'PATCH',\n        headers: {\n          Authorization: `JWT ${localStorage.getItem('token')}`\n        }\n      }).then(res => res.json()).then(posts => {\n        setCurrentUser(posts);\n        setUserPhoto(posts.photo);\n        setUserGrade(posts.grade);\n\n        if (location.state.url === \"일반 수강생\") {\n          setUserGrade(\"일반 수강생\");\n          setUrls(\"student/\");\n        } else if (location.state.url === \"프리미엄 수강생\") {\n          setUserGrade(\"프리미엄 수강생\");\n          setUrls(\"premiumst/\");\n        } else if (location.state.url === \"일반 파트너\") {\n          setUserGrade(\"일반 파트너\");\n          setUrls(\"partner/\");\n        } else if (location.state.url === \"프리미엄 파트너\") {\n          setUserGrade(\"프리미엄 파트너\");\n          setUrls(\"premium/\");\n        } else {\n          history.push('/profile');\n          alert(\"티어인증이 필요합니다\");\n        }\n      });\n    });\n    fetch('http://39.118.174.168:8000/board/' + urls + pgN + \"/\").then(res => res.json()).then(posts => {\n      // console.log(urls);\n      setDetailList(posts);\n      setTitle(posts.title);\n      setContent(location.state.content);\n      setUser_id(posts.user_id);\n      setUserNickname(posts.nickname);\n      let Y = posts.pub_date.split('-')[0];\n      let M = posts.pub_date.split('-')[1];\n      let D = posts.pub_date.split('-')[2].split('T')[0];\n      setDetailDate(Y + \"년 \" + M + \"월 \" + D + \"일\");\n      setInfomationFilterList(posts.infomation.split(','));\n      fetch('http://39.118.174.168:8000/api/profile/' + posts.user_id + '/').then(res => res.json()).then(info => {\n        setDetailUserInfo(info);\n      });\n    });\n  }, [pgN, urls, history, location]);\n\n  const handleSubmit = () => {\n    let form_data = new FormData();\n    form_data.append('category', sendData.grade);\n    form_data.append('title', sendData.title);\n    form_data.append('contents', sendData.content);\n    form_data.append('pub_date', sendData.date);\n    form_data.append('infomation', sendData.infomation);\n    form_data.append('nickname', sendData.nickname);\n    form_data.append('profileImage', sendData.profileImage);\n    form_data.append('user_id', sendData.user_id);\n    fetch(\"http://39.118.174.168:8000/board/\" + urls + pgN + \"/update/\", {\n      method: 'PATCH',\n      headers: {\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      },\n      body: form_data\n    }).then(res => res.json()).catch(error => console.error('Error:', error)).then(response => console.log('Success:', JSON.stringify(response))); // .then(history.push(\"urls/\"))\n\n    alert(\"수정이 완료되었습니다\");\n    window.location.href = \"/\" + urls; //  .then(history.go(1));\n  };\n\n  const handleEffect = handleSubmit => {\n    // if(InfomationfilterList === \"\" || InfomationfilterList.length === 0){\n    //     alert(\"한 개 이상의 언어를 선택해주세요.\")\n    //     return;\n    // }\n    if (title === undefined || title === \"\" || title === null) {\n      alert(\"제목을 다시 입력해주세요\");\n      return;\n    }\n\n    if (content === undefined || content === \"\" || content === null) {\n      alert(\"내용을 다시 입력해주세요\");\n      return;\n    }\n\n    sendData = {\n      title: title,\n      content: content,\n      date: date,\n      nickname: userNickname,\n      infomation: InfomationfilterList,\n      profileImage: userPhoto,\n      user_id: user_id,\n      grade: usergrade\n    };\n    handleSubmit();\n  };\n\n  let sendData;\n  let [userNickname, setUserNickname] = useState();\n  let [user_id, setUser_id] = useState();\n  let [userPhoto, setUserPhoto] = useState();\n\n  const ClickFilter = lang => {\n    let Num = 0;\n    let List = [...InfomationfilterList];\n    List.map(a => {\n      if (a === lang) {\n        Num = 1;\n      }\n\n      return Num;\n    });\n\n    if (Num === 0) {\n      List.push(lang);\n    } else {\n      List.splice(List.indexOf(lang), 1);\n    }\n\n    setInfomationFilterList(List);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detail__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detail__head-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: detailList.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail__head-btn\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail__head-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"information\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail__head-username\",\n              children: detailList.nickname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"separator\",\n              children: \"\\xB7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [detailDate, detailList.updateCount === 0 ? null : \"  ·  작성됨\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail__head-mobileLike\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"likeBtn\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  fill: \"currentColor\",\n                  d: \"M18 1l-6 4-6-4-6 5v7l12 10 12-10v-7z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 81\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filetrList\",\n          children: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: InfomationfilterList === \"\" || InfomationfilterList === undefined || InfomationfilterList === null ? null : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: InfomationfilterList.map((a, i) => {\n                return /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"#\", a]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 45\n                }, this);\n              })\n            }, void 0, false)\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 21\n        }, this), detailList.image === null ? null : /*#__PURE__*/_jsxDEV(\"img\", {\n          src: detailList.image,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detail__body-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail__content\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            style: titleStyle,\n            placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n            defaultValue: detailList.title,\n            onChange: event => {\n              setTitle(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(CKEditor, {\n            data: detailList.contents,\n            onChange: handleChange,\n            config: {\n              extraPlugins: 'print,format,font,colorbutton,justify,image2',\n              // filebrowserUploadMethod:'form',\n              uiColor: \"#AADC6E\",\n              // filebrowserBrowseUrl: 'http://39.118.174.168:8000/media/board/',\n              // filebrowserImageBrowseUrl: 'http://39.118.174.168:8000/ckeditor/browse/',\n              filebrowserUploadUrl: 'http://39.118.174.168:8000/media/board/',\n              filebrowserImageUploadUrl: 'http://39.118.174.168:8000/ckeditor/upload/',\n              headers: {\n                'X-CSRFToken': csrftoken\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 21\n          }, this), detailList.user_id === currnetUser.user_id || currnetUser.Tier === \"운영자\" ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"upButton\",\n            onClick: () => {\n              handleEffect(handleSubmit);\n            },\n            children: \"\\uC218\\uC815\\uD558\\uAE30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 18\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detail__footer-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail__writerInfo\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail__topInfo\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: \"/mysite/\" + detailList.id,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: detailList.profileImage,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail__userInfo\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"description\",\n                children: detailUserInfo.myInfo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sc-epnACN eIoWCE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail__buttomInfo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detail__comment-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail__comment-width\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"margin__top\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fillter_section\",\n      children: /*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"pDRpR\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"eyrfCG\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter__head\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            style: {\n              listStyleType: \"none\"\n            },\n            children: filterList.map(a => {\n              let boolenChecked = false;\n\n              if (InfomationfilterList.indexOf(a.infomation) !== -1) {\n                boolenChecked = true;\n              }\n\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  id: a.infomation,\n                  className: \"filters-input__checkbox\",\n                  value: \"action\",\n                  type: \"checkbox\",\n                  \"data-type\": \"genres\",\n                  defaultChecked: boolenChecked\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 29\n                }, this), console.log(a.infomation + \":\" + boolenChecked), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"input__label\",\n                  htmlFor: a.infomation,\n                  onClick: () => {\n                    ClickFilter(a.infomation);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\" \", a.infomation, \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"filters-input__tick\",\n                    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                      focusable: \"false\",\n                      \"aria-hidden\": \"true\",\n                      width: \"15\",\n                      height: \"15\",\n                      children: /*#__PURE__*/_jsxDEV(\"use\", {\n                        xlinkHref: \"#check\",\n                        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                          viewBox: \"0 0 24 24\",\n                          id: \"check\",\n                          xmlns: \"http://www.w3.org/2000/svg\",\n                          children: /*#__PURE__*/_jsxDEV(\"path\", {\n                            d: \"M9 21.035l-9-8.638 2.791-2.87 6.156 5.874 12.21-12.436L24 5.782z\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 354,\n                            columnNumber: 104\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 354,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 353,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 349,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 348,\n                    columnNumber: 32\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 29\n                }, this)]\n              }, a.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 25\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Update, \"uzMnIx4T8qWIi7jTkyzkaCWptpQ=\", false, function () {\n  return [useHistory, useLocation];\n});\n\n_c = Update;\nexport default Update;\n\nvar _c;\n\n$RefreshReg$(_c, \"Update\");","map":{"version":3,"sources":["C:/django-react/frontend/src/views/Update.js"],"names":["React","useState","useEffect","Link","useHistory","CKEditor","Form","useLocation","jQuery","window","$","titleStyle","marginBottom","width","Update","props","filterList","id","infomation","InfomationfilterList","setInfomationFilterList","handleChange","event","setContent","editor","getData","history","pgN","document","location","href","split","title","setTitle","content","detailList","setDetailList","detailUserInfo","setDetailUserInfo","detailDate","setDetailDate","usergrade","setUserGrade","currnetUser","setCurrentUser","urls","setUrls","Today","Date","date","getFullYear","getMonth","getDate","csrftoken","getCookie","name","cookieValue","cookie","cookies","i","length","trim","substring","decodeURIComponent","fetch","headers","Authorization","localStorage","getItem","then","res","json","method","posts","setUserPhoto","photo","grade","state","url","push","alert","setUser_id","user_id","setUserNickname","nickname","Y","pub_date","M","D","info","handleSubmit","form_data","FormData","append","sendData","profileImage","body","catch","error","console","response","log","JSON","stringify","handleEffect","undefined","userNickname","userPhoto","ClickFilter","lang","Num","List","map","a","splice","indexOf","updateCount","image","target","value","contents","extraPlugins","uiColor","filebrowserUploadUrl","filebrowserImageUploadUrl","Tier","myInfo","listStyleType","boolenChecked"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {Link} from 'react-router-dom';\nimport { useHistory } from 'react-router'\nimport CKEditor from 'ckeditor4-react-advanced';\nimport {Form} from \"react-bootstrap\";\nimport {useLocation} from \"react-router\";\nimport jQuery from \"jquery\";\nwindow.$ = window.jQuery = jQuery;\n\nconst titleStyle = {\n    marginBottom: 9,\n    width: 762,\n\n  };\n\nfunction Update(props){\n    \n    let [filterList] = useState([{id : 1, infomation: '챌린저'}, {id : 2, infomation : '그랜드마스터'},\n    {id : 3, infomation : '마스터'}, {id : 4, infomation :'다이아몬드'}, {id : 5, infomation:'플레티넘'},\n    {id : 6, infomation:'골드'}, {id : 7, infomation:'실버'}, {id : 8, infomation:'브론즈'}, {id : 9, infomation:'아이언'}])\n    let [InfomationfilterList, setInfomationFilterList] = useState(\"\")\n\n    const handleChange = (event) => {\n    setContent(event.editor.getData())\n    // setContent(event.target.value);\n  };\n    const history = useHistory();\n    // let Today = new Date();\n    // let date = Today.getFullYear() + \"-\" + Today.getMonth() + \"-\" + Today.getDate()\n\n    let pgN = document.location.href.split('/')[4];\n    let [title , setTitle] = useState(\"\");\n    let [content , setContent] = useState(\"\");\n    let [detailList, setDetailList] = useState({});\n    let [detailUserInfo, setDetailUserInfo] = useState({});\n    let [detailDate, setDetailDate] = useState();\n    let [usergrade, setUserGrade] = useState();\n    let [currnetUser, setCurrentUser] = useState({});\n    let [urls, setUrls] = useState();\n    let Today = new Date();\n    let date = Today.getFullYear() + \"년\" + Today.getMonth() + \"월\" + Today.getDate() + \"일\";\n    const location = useLocation();\n    const csrftoken = getCookie('csrfToken');\n\n    function getCookie(name) {\n      var cookieValue = null;\n      if (document.cookie && document.cookie !== '') {\n          var cookies = document.cookie.split(';');\n          for (var i = 0; i < cookies.length; i++) {\n              var cookie = jQuery.trim(cookies[i]);\n              if (cookie.substring(0, name.length + 1) === (name + '=')) {\n                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                  break;\n              }\n          }\n      }\n      return cookieValue;\n    }\n\n    useEffect(()=>{\n        fetch('http://39.118.174.168:8000/api/current_user/', {\n                headers: {\n                    Authorization: `JWT ${localStorage.getItem('token')}`\n                }\n                })\n                .then(res => res.json())\n                .then(json => {\n                fetch('http://39.118.174.168:8000/api/profile/' + json.id + '/update/',{\n                        method : 'PATCH',\n                        headers: {\n                            Authorization: `JWT ${localStorage.getItem('token')}`\n                        },\n                    })\n                    .then((res)=>res.json())\n                    .then((posts)=> {\n                        setCurrentUser(posts);\n                        setUserPhoto(posts.photo);\n                        setUserGrade(posts.grade);\n                        \n                        if(location.state.url===\"일반 수강생\"){\n                            setUserGrade(\"일반 수강생\");\n                            setUrls(\"student/\");\n                          } else if(location.state.url===\"프리미엄 수강생\"){\n                            setUserGrade(\"프리미엄 수강생\");\n                            setUrls(\"premiumst/\");\n                          } else if(location.state.url===\"일반 파트너\"){\n                            setUserGrade(\"일반 파트너\");\n                            setUrls(\"partner/\");\n                          } else if(location.state.url===\"프리미엄 파트너\"){\n                            setUserGrade(\"프리미엄 파트너\");\n                            setUrls(\"premium/\");\n                          } else{\n                            history.push('/profile');\n                            alert(\"티어인증이 필요합니다\");\n                          }\n                    })\n                })  \n                \n        fetch('http://39.118.174.168:8000/board/'+ urls + pgN + \"/\")\n        .then((res)=>res.json())\n            .then((posts)=>{\n                // console.log(urls);\n                setDetailList(posts)\n                setTitle(posts.title)\n                setContent(location.state.content)\n                setUser_id(posts.user_id);\n                setUserNickname(posts.nickname);\n                let Y = posts.pub_date.split('-')[0]\n                let M = posts.pub_date.split('-')[1]\n                let D = posts.pub_date.split('-')[2].split('T')[0]\n                setDetailDate(Y + \"년 \" + M + \"월 \" + D + \"일\")\n                setInfomationFilterList(posts.infomation.split(','))\n                fetch('http://39.118.174.168:8000/api/profile/' + posts.user_id + '/')\n                .then((res)=>res.json())\n                .then((info)=>{\n                    setDetailUserInfo(info)\n                })\n            })\n    },[pgN,urls,history, location])\n\n    const handleSubmit = () => {\n        let form_data = new FormData();\n        form_data.append('category', sendData.grade);\n        form_data.append('title', sendData.title);\n        form_data.append('contents', sendData.content);\n        form_data.append('pub_date', sendData.date);\n        form_data.append('infomation', sendData.infomation);\n        form_data.append('nickname', sendData.nickname);\n        form_data.append('profileImage', sendData.profileImage)\n        form_data.append('user_id', sendData.user_id);\n        \n        fetch(\"http://39.118.174.168:8000/board/\" + urls + pgN + \"/update/\", {\n            method : 'PATCH',\n            headers: {\n                Authorization : `JWT ${localStorage.getItem('token')}`,\n            },\n            body : form_data\n        })\n        .then(res => res.json())\n        .catch(error => console.error('Error:', error))\n        .then(response => console.log('Success:', JSON.stringify(response)))\n        // .then(history.push(\"urls/\"))\n        alert(\"수정이 완료되었습니다\")\n        window.location.href =\"/\" + urls\n        //  .then(history.go(1));\n    };\n\n\n    const handleEffect = (handleSubmit) => {\n        // if(InfomationfilterList === \"\" || InfomationfilterList.length === 0){\n        //     alert(\"한 개 이상의 언어를 선택해주세요.\")\n        //     return;\n        // }\n        if(title === undefined || title === \"\" || title === null){\n            alert(\"제목을 다시 입력해주세요\")\n            return;\n          }\n        if(content === undefined || content === \"\" || content === null){\n            alert(\"내용을 다시 입력해주세요\")\n            return;\n           }\n        sendData = {\n            title : title,\n            content : content,\n            date : date,\n            nickname : userNickname,\n            infomation : InfomationfilterList,\n            profileImage : userPhoto,\n            user_id : user_id,\n            grade : usergrade\n        }\n        handleSubmit()\n        \n    }\n    let sendData;\n\n    let [userNickname, setUserNickname] = useState()\n    let [user_id, setUser_id] = useState()\n    \n    let [userPhoto, setUserPhoto] = useState()\n\n    const ClickFilter = (lang)=>{\n        let Num = 0;\n        let List = [...InfomationfilterList]\n        \n        List.map((a)=>{\n            if(a === lang){\n                Num = 1;\n            }\n            return Num;\n        })\n        if (Num === 0) {\n            List.push(lang)\n        }else{\n            List.splice(List.indexOf(lang),1)\n        }\n        setInfomationFilterList(List)\n    }\n    \n\n    return(\n        <>\n            <div className=\"detail__container\">\n                <div className=\"detail__head-wrapper\">\n                    <h1>{detailList.title}</h1>\n                    <div className=\"detail__head-btn\">\n                        {\n                 \n                        }\n                    </div>\n                    <div className=\"detail__head-info\">\n                        <div className=\"information\">\n                            <span className=\"detail__head-username\">{detailList.nickname}</span>\n                            <span className=\"separator\">·</span>\n                            <span>{detailDate}{detailList.updateCount === 0 ? null : \"  ·  작성됨\"}</span>\n                        </div>\n                        <div className=\"detail__head-mobileLike\">\n                            <button className=\"likeBtn\">\n                                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M18 1l-6 4-6-4-6 5v7l12 10 12-10v-7z\"></path></svg>\n                            </button>\n                        </div>\n                    </div>\n                    \n                   \n                    <div className=\"filetrList\">\n                    {\n                        <>\n                        {\n                            InfomationfilterList === \"\" || InfomationfilterList === undefined || InfomationfilterList === null \n                            ? null :\n                            (\n                                <>   \n                                {\n                                    InfomationfilterList.map((a, i)=>{\n                                        return(\n                                            <p key={i}>#{a}</p>\n                                        )\n                                    })\n                                }\n                                </>\n                            )\n                        }\n                        </>\n                    }\n                    </div>\n                    {\n                        detailList.image === null\n                        ? null\n                        : <img src={detailList.image} alt=\"\"></img>\n                    }\n                   \n                </div>\n                <div className=\"detail__body-wrapper\">\n                    <div className=\"detail__content\">\n                    <Form.Control\n                    type = \"text\"\n                    style = {titleStyle}\n                    placeholder = \"제목을 입력하세요\"\n                    defaultValue = {detailList.title}\n                    onChange = {(event)=>{setTitle(event.target.value)}}/>\n                    \n                    <CKEditor\n                    data = {detailList.contents}\n                    onChange = {handleChange}\n                    config={{\n                        extraPlugins: 'print,format,font,colorbutton,justify,image2',\n                          // filebrowserUploadMethod:'form',\n                          uiColor: \"#AADC6E\",\n                          // filebrowserBrowseUrl: 'http://39.118.174.168:8000/media/board/',\n                          // filebrowserImageBrowseUrl: 'http://39.118.174.168:8000/ckeditor/browse/',\n                          filebrowserUploadUrl: 'http://39.118.174.168:8000/media/board/',\n                          filebrowserImageUploadUrl: 'http://39.118.174.168:8000/ckeditor/upload/',\n                          headers: {\n                            'X-CSRFToken': csrftoken,\n                          }\n                      }} />\n                 {\n                \n                 detailList.user_id === currnetUser.user_id || currnetUser.Tier === \"운영자\"\n                 ?(\n                 <button className=\"upButton\"\n                  onClick={()=>{\n                    handleEffect(handleSubmit) \n                  }}>\n\n                수정하기</button>\n                )\n                : null\n                }\n                \n                        {/* <p dangerouslySetInnerHTML={{\n                            __html: detailList.contents\n                        }}></p> */}\n                    </div>\n                </div>\n\n                <div className=\"detail__footer-wrapper\">\n                    <div className=\"detail__writerInfo\">\n                        <div className=\"detail__topInfo\">\n                            <Link to={\"/mysite/\" + detailList.id}>\n                                <img src={detailList.profileImage} alt=\"\"></img>\n                            </Link>\n                            <div className=\"detail__userInfo\">\n                                <div className=\"description\">{detailUserInfo.myInfo}</div>\n                            </div>\n                        </div>\n                        <div className=\"sc-epnACN eIoWCE\"></div>\n                        <div className=\"detail__buttomInfo\">\n                      \n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"detail__comment-wrapper\">\n                    {/* <h4>{commentList.length + reCommentList.length}개의 댓글</h4> */}\n                    <div className=\"detail__comment-width\">\n                        {/* <div>\n                            <textarea ref={commentTxt} defaultValue=\"\" placeholder=\"댓글을 작성하세요\" className=\"comment__textarea\" onChange={(e)=>{setCommentContent(e.target.value)}}></textarea>\n                            <div className=\"buttons-wrapper\">\n                                <button className=\"comment__btn\" onClick={()=>{CommentEffect(CommentSubmit)}}>댓글 작성</button>\n                            </div>\n                        </div> */}\n                        <div className=\"margin__top\">\n                            <div></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"fillter_section\">\n            <aside className=\"pDRpR\">\n            <div className=\"eyrfCG\">\n              <div className=\"filter__head\" />\n                <ul style={{ listStyleType: \"none\"}}>\n                 {\n                    filterList.map((a)=>{\n                        let boolenChecked = false\n                        if(InfomationfilterList.indexOf(a.infomation) !== -1){\n                            boolenChecked = true\n                        }\n                        return(\n                        <li key={a.id}>\n                            <input id={a.infomation} className=\"filters-input__checkbox\" value=\"action\" type=\"checkbox\" data-type=\"genres\" defaultChecked={boolenChecked}></input>\n                            {\n                                console.log(a.infomation +\":\"+ boolenChecked)                                \n                            }\n                            <label className=\"input__label\" htmlFor={a.infomation} onClick={()=>{ClickFilter(a.infomation)}}>\n                              <span> {a.infomation} </span>\n                               <span className=\"filters-input__tick\">\n                                <svg \n                                focusable=\"false\" aria-hidden=\"true\"\n                                width=\"15\"\n                                height=\"15\">\n                                <use xlinkHref=\"#check\">\n                                <svg viewBox=\"0 0 24 24\" id=\"check\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9 21.035l-9-8.638 2.791-2.87 6.156 5.874 12.21-12.436L24 5.782z\"></path></svg>\n                                </use>\n                                </svg>\n                              </span>\n                            </label>\n                        </li>\n                        )\n                    })\n                  }\n                </ul>\n                \n               </div>  \n            </aside>\n            </div>\n        </>\n    )\n}\nexport default Update;"]},"metadata":{},"sourceType":"module"}